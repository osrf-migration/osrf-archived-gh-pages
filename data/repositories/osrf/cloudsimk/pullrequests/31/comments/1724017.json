{"links": {"self": {"href": "data/repositories/osrf/cloudsimk/pullrequests/31/comments/1724017.json"}, "html": {"href": "#!/osrf/cloudsimk/pull-requests/31/_/diff#comment-1724017"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 31, "links": {"self": {"href": "data/repositories/osrf/cloudsimk/pullrequests/31.json"}, "html": {"href": "#!/osrf/cloudsimk/pull-requests/31"}}, "title": "Server callback when running"}, "content": {"raw": "How to test:\n\nYou should have your AWS account details in the environment where you\nrun the grunt command:\n\n```\n#!bash\n\nexport AWS_ACCESS_KEY_ID=xxxxx\nexport AWS_SECRET_ACCESS_KEY=xxxxx\n```\n\nThen you can launch a simulator. \n\nYou should see a \"Launching simulator\" message in the cloudsim.io log\n\n```\n#!bash\n\nLaunching simulator\n- SSH key: cs-6-hugo@osrfoundation.org\n- region:us-west-2\n- hardware: g2.2xlarge\n- image: ami-b8d2b088\n- tags: { Name: 'simulator', user: 'hugo@osrfoundation.org', id: 6 }\n\n```\n\n30 sec later by an update:\n\n```\n#!bash\n\nmachine:{ id: 'i-e739f2ef', region: 'us-west-2' } status: { ip: '54.185.52.4', state: 'running' }\n\n```\n\nIf you refresh the webpage, the simulator line should show a status of \"Launching\"\n\nAfter the machine is ready, the cloudsim.io log should show a callback message:\n\n```\n#!bash\n\nsimulatorCallback data:{ world: 'Atlas',\n  token: 'ed05d98c-6a7f-4c7f-953b-0b026937d1a8' }\n\n```\nYou should now see the simulator state as \"Running\". You need to refresh the page, since the websocket support is not there yet.\n\n\n", "markup": "markdown", "html": "<p>How to test:</p>\n<p>You should have your AWS account details in the environment where you\nrun the grunt command:</p>\n<div class=\"codehilite language-bash\"><pre><span></span><span class=\"nb\">export</span> <span class=\"nv\">AWS_ACCESS_KEY_ID</span><span class=\"o\">=</span>xxxxx\n<span class=\"nb\">export</span> <span class=\"nv\">AWS_SECRET_ACCESS_KEY</span><span class=\"o\">=</span>xxxxx\n</pre></div>\n\n\n<p>Then you can launch a simulator. </p>\n<p>You should see a \"Launching simulator\" message in the cloudsim.io log</p>\n<div class=\"codehilite language-bash\"><pre><span></span>Launching simulator\n- SSH key: cs-6-hugo@osrfoundation.org\n- region:us-west-2\n- hardware: g2.2xlarge\n- image: ami-b8d2b088\n- tags: <span class=\"o\">{</span> Name: <span class=\"s1\">&#39;simulator&#39;</span>, user: <span class=\"s1\">&#39;hugo@osrfoundation.org&#39;</span>, id: <span class=\"m\">6</span> <span class=\"o\">}</span>\n</pre></div>\n\n\n<p>30 sec later by an update:</p>\n<div class=\"codehilite language-bash\"><pre><span></span>machine:<span class=\"o\">{</span> id: <span class=\"s1\">&#39;i-e739f2ef&#39;</span>, region: <span class=\"s1\">&#39;us-west-2&#39;</span> <span class=\"o\">}</span> status: <span class=\"o\">{</span> ip: <span class=\"s1\">&#39;54.185.52.4&#39;</span>, state: <span class=\"s1\">&#39;running&#39;</span> <span class=\"o\">}</span>\n</pre></div>\n\n\n<p>If you refresh the webpage, the simulator line should show a status of \"Launching\"</p>\n<p>After the machine is ready, the cloudsim.io log should show a callback message:</p>\n<div class=\"codehilite language-bash\"><pre><span></span>simulatorCallback data:<span class=\"o\">{</span> world: <span class=\"s1\">&#39;Atlas&#39;</span>,\n  token: <span class=\"s1\">&#39;ed05d98c-6a7f-4c7f-953b-0b026937d1a8&#39;</span> <span class=\"o\">}</span>\n</pre></div>\n\n\n<p>You should now see the simulator state as \"Running\". You need to refresh the page, since the websocket support is not there yet.</p>", "type": "rendered"}, "created_on": "2014-04-23T21:52:43.744409+00:00", "user": {"display_name": "Hugo Boyer", "uuid": "{3d87874e-7099-4981-b04f-57f0272faa7d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D"}, "html": {"href": "https://bitbucket.org/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/21198da8539b599e3633017f5f5f8150d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsHB-6.png"}}, "nickname": "hugomatic", "type": "user", "account_id": "557058:869c02bb-b246-4cdc-9db3-0064e8add185"}, "updated_on": "2014-04-23T21:52:43.756028+00:00", "type": "pullrequest_comment", "id": 1724017}