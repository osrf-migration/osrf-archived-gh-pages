{"links": {"self": {"href": "data/repositories/osrf/cloudsim-widgets/pullrequests/71/comments/26247516.json"}, "html": {"href": "#!/osrf/cloudsim-widgets/pull-requests/71/_/diff#comment-26247516"}}, "parent": {"id": 26246739, "links": {"self": {"href": "data/repositories/osrf/cloudsim-widgets/pullrequests/71/comments/26246739.json"}, "html": {"href": "#!/osrf/cloudsim-widgets/pull-requests/71/_/diff#comment-26246739"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 71, "links": {"self": {"href": "data/repositories/osrf/cloudsim-widgets/pullrequests/71.json"}, "html": {"href": "#!/osrf/cloudsim-widgets/pull-requests/71"}}, "title": "Swagger REST API documentation on /api"}, "content": {"raw": "Try this:\n\n```\n#!js\n\n// prints all requests to the terminal\napp.use(morgan('combined', {\n  skip: function (req, res) {\n    // skip /api stuff\n    const isApi = req.originalUrl.startsWith('/api/')\n    if (isApi) {\n      return true\n    }\n    return false\n  }\n}))\n\n```\nline 23 in server/cloudsim-widgets.js\n\nIt should also work with favicon (though we should have one). The gtocha is that you have to use `req.originalUrl` instead of `req.url`", "markup": "markdown", "html": "<p>Try this:</p>\n<div class=\"codehilite language-js\"><pre><span></span><span class=\"c1\">// prints all requests to the terminal</span>\n<span class=\"nx\">app</span><span class=\"p\">.</span><span class=\"nx\">use</span><span class=\"p\">(</span><span class=\"nx\">morgan</span><span class=\"p\">(</span><span class=\"s1\">&#39;combined&#39;</span><span class=\"p\">,</span> <span class=\"p\">{</span>\n  <span class=\"nx\">skip</span><span class=\"o\">:</span> <span class=\"kd\">function</span> <span class=\"p\">(</span><span class=\"nx\">req</span><span class=\"p\">,</span> <span class=\"nx\">res</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"c1\">// skip /api stuff</span>\n    <span class=\"kr\">const</span> <span class=\"nx\">isApi</span> <span class=\"o\">=</span> <span class=\"nx\">req</span><span class=\"p\">.</span><span class=\"nx\">originalUrl</span><span class=\"p\">.</span><span class=\"nx\">startsWith</span><span class=\"p\">(</span><span class=\"s1\">&#39;/api/&#39;</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"nx\">isApi</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n      <span class=\"k\">return</span> <span class=\"kc\">true</span>\n    <span class=\"p\">}</span>\n    <span class=\"k\">return</span> <span class=\"kc\">false</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}))</span>\n</pre></div>\n\n\n<p>line 23 in server/cloudsim-widgets.js</p>\n<p>It should also work with favicon (though we should have one). The gtocha is that you have to use <code>req.originalUrl</code> instead of <code>req.url</code></p>", "type": "rendered"}, "created_on": "2016-11-03T17:43:37.968674+00:00", "user": {"display_name": "Hugo Boyer", "uuid": "{3d87874e-7099-4981-b04f-57f0272faa7d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D"}, "html": {"href": "https://bitbucket.org/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/21198da8539b599e3633017f5f5f8150d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsHB-6.png"}}, "nickname": "hugomatic", "type": "user", "account_id": "557058:869c02bb-b246-4cdc-9db3-0064e8add185"}, "updated_on": "2016-11-03T17:45:56.008274+00:00", "type": "pullrequest_comment", "id": 26247516}