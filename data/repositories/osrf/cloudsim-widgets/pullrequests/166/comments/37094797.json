{"links": {"self": {"href": "data/repositories/osrf/cloudsim-widgets/pullrequests/166/comments/37094797.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/cloudsim-widgets/diff/osrf/cloudsim-widgets:c058b356a5e5..48b5ffeb4c3e?path=app%2Felements%2Fcs-usermetrics%2Fcs-usermetrics.html"}, "html": {"href": "#!/osrf/cloudsim-widgets/pull-requests/166/_/diff#comment-37094797"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 166, "links": {"self": {"href": "data/repositories/osrf/cloudsim-widgets/pullrequests/166.json"}, "html": {"href": "#!/osrf/cloudsim-widgets/pull-requests/166"}}, "title": "Set and Update User Budget"}, "content": {"raw": "I feel a bit uneasy about doing this in two steps (one request to create the resource, wait for response, then another request to share it). This is how most of the code in SASC works, and it has caused several problems. If the user refreshes the page before getting this reply for example, the config will never be shared. In general, we're trying to move logic away from the browser.\n\nI see two alternative ways of doing this:\n\n1. Do the sharing on the server side the moment the resource is created, this requires modifying the `POST /metrics/configs` route\n1. Have the user do it in two steps on the GUI. First you click a button to create the resource, then you click another button to share it. This is how other resources like machine types, s3 keys and teams work.", "markup": "markdown", "html": "<p>I feel a bit uneasy about doing this in two steps (one request to create the resource, wait for response, then another request to share it). This is how most of the code in SASC works, and it has caused several problems. If the user refreshes the page before getting this reply for example, the config will never be shared. In general, we're trying to move logic away from the browser.</p>\n<p>I see two alternative ways of doing this:</p>\n<ol>\n<li>Do the sharing on the server side the moment the resource is created, this requires modifying the <code>POST /metrics/configs</code> route</li>\n<li>Have the user do it in two steps on the GUI. First you click a button to create the resource, then you click another button to share it. This is how other resources like machine types, s3 keys and teams work.</li>\n</ol>", "type": "rendered"}, "created_on": "2017-05-17T18:30:16.500844+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 407, "from": null, "outdated": true, "path": "app/elements/cs-usermetrics/cs-usermetrics.html"}, "updated_on": "2017-05-17T18:30:16.503313+00:00", "type": "pullrequest_comment", "id": 37094797}