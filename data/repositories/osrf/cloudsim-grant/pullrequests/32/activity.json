{"pagelen": 50, "values": [{"update": {"description": "This PR build on top of pull request #31. Please review that one first.\r\n\r\nThe state of resources is now saved in the database\r\n\r\nAfter updating a server to use these changes, the expected behavior is:\r\n\r\n1. the first time a server is launched and if there exist no states in db, the resources will be reconstructed from the logs (old way). The resources will then be written to db as a key (`[name]:state`) - this is the database state.\r\n\r\n1. subsequent operations, e.g. create resource, grant, revoke, will be written as logs to the db (same as before). A counter (`[name]:state-backlog`) is used to keep track of the number of operations performed after a saved state\r\n\r\n1. once 10000 number of db operations have been written, a new state will be saved which overwrites the old one. The `state-backlog` counter resets to 0.\r\n\r\n1. when the server is redeployed, it loads the latest saved state from db to create the resources. It then uses the counter to determine how many operations are needed to reconstruct the resources back to the most recent state before the redeployment.", "title": "Support saving and reloading database states", "destination": {"commit": {"hash": "6f24e4a17a9d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/commit/6f24e4a17a9d.json"}, "html": {"href": "#!/osrf/cloudsim-grant/commits/6f24e4a17a9d"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant.json"}, "html": {"href": "#!/osrf/cloudsim-grant"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ca19179-2686-45dc-b64a-7b1be2b404de}ts=default"}}, "type": "repository", "name": "cloudsim-grant", "full_name": "osrf/cloudsim-grant", "uuid": "{7ca19179-2686-45dc-b64a-7b1be2b404de}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "b1a77cffa79c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/commit/b1a77cffa79c.json"}, "html": {"href": "#!/osrf/cloudsim-grant/commits/b1a77cffa79c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant.json"}, "html": {"href": "#!/osrf/cloudsim-grant"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ca19179-2686-45dc-b64a-7b1be2b404de}ts=default"}}, "type": "repository", "name": "cloudsim-grant", "full_name": "osrf/cloudsim-grant", "uuid": "{7ca19179-2686-45dc-b64a-7b1be2b404de}"}, "branch": {"name": "save_state"}}, "state": "MERGED", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "date": "2017-04-12T16:54:21.447274+00:00"}, "pull_request": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}}, {"approval": {"date": "2017-04-12T01:06:11.489818+00:00", "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}, "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}}, "pull_request": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32/comments/34894364.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32/_/diff#comment-34894364"}}, "parent": {"id": 34892670, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32/comments/34892670.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32/_/diff#comment-34892670"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}, "content": {"raw": "yep, done. b1a77cf", "markup": "markdown", "html": "<p>yep, done. <a href=\"#!/osrf/cloudsim-grant/commits/b1a77cf\" rel=\"nofollow\" class=\"ap-connect-link\">b1a77cf</a></p>", "type": "rendered"}, "created_on": "2017-04-12T01:02:11.131143+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2017-04-12T01:02:11.133760+00:00", "type": "pullrequest_comment", "id": 34894364}, "pull_request": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}}, {"update": {"description": "This PR build on top of pull request #31. Please review that one first.\r\n\r\nThe state of resources is now saved in the database\r\n\r\nAfter updating a server to use these changes, the expected behavior is:\r\n\r\n1. the first time a server is launched and if there exist no states in db, the resources will be reconstructed from the logs (old way). The resources will then be written to db as a key (`[name]:state`) - this is the database state.\r\n\r\n1. subsequent operations, e.g. create resource, grant, revoke, will be written as logs to the db (same as before). A counter (`[name]:state-backlog`) is used to keep track of the number of operations performed after a saved state\r\n\r\n1. once 10000 number of db operations have been written, a new state will be saved which overwrites the old one. The `state-backlog` counter resets to 0.\r\n\r\n1. when the server is redeployed, it loads the latest saved state from db to create the resources. It then uses the counter to determine how many operations are needed to reconstruct the resources back to the most recent state before the redeployment.", "title": "Support saving and reloading database states", "destination": {"commit": {"hash": "6f24e4a17a9d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/commit/6f24e4a17a9d.json"}, "html": {"href": "#!/osrf/cloudsim-grant/commits/6f24e4a17a9d"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant.json"}, "html": {"href": "#!/osrf/cloudsim-grant"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ca19179-2686-45dc-b64a-7b1be2b404de}ts=default"}}, "type": "repository", "name": "cloudsim-grant", "full_name": "osrf/cloudsim-grant", "uuid": "{7ca19179-2686-45dc-b64a-7b1be2b404de}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "b1a77cffa79c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/commit/b1a77cffa79c.json"}, "html": {"href": "#!/osrf/cloudsim-grant/commits/b1a77cffa79c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant.json"}, "html": {"href": "#!/osrf/cloudsim-grant"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ca19179-2686-45dc-b64a-7b1be2b404de}ts=default"}}, "type": "repository", "name": "cloudsim-grant", "full_name": "osrf/cloudsim-grant", "uuid": "{7ca19179-2686-45dc-b64a-7b1be2b404de}"}, "branch": {"name": "save_state"}}, "state": "OPEN", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "date": "2017-04-12T01:01:57.511817+00:00"}, "pull_request": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32/comments/34892693.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32/_/diff#comment-34892693"}}, "parent": {"id": 34892617, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32/comments/34892617.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32/_/diff#comment-34892617"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}, "content": {"raw": "by the way, the `n` in your `3n+1` is 3, in case you were wondering :)", "markup": "markdown", "html": "<p>by the way, the <code>n</code> in your <code>3n+1</code> is 3, in case you were wondering :)</p>", "type": "rendered"}, "created_on": "2017-04-11T23:59:41.035455+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2017-04-11T23:59:41.037995+00:00", "type": "pullrequest_comment", "id": 34892693}, "pull_request": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32/comments/34892670.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32/_/diff#comment-34892670"}}, "parent": {"id": 34892617, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32/comments/34892617.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32/_/diff#comment-34892617"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}, "content": {"raw": "Awesome, thanks for the clarification. I was imagining something like this but wanted to be sure. Could we add these expectations together with a shorter version of the explanation you wrote here? :smile: ", "markup": "markdown", "html": "<p>Awesome, thanks for the clarification. I was imagining something like this but wanted to be sure. Could we add these expectations together with a shorter version of the explanation you wrote here? <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f604.png\" alt=\"\ud83d\ude04\" title=\":smile:\" data-emoji-short-name=\":smile:\" /> </p>", "type": "rendered"}, "created_on": "2017-04-11T23:58:42.405158+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2017-04-11T23:58:42.407807+00:00", "type": "pullrequest_comment", "id": 34892670}, "pull_request": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32/comments/34892617.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32/_/diff#comment-34892617"}}, "parent": {"id": 34889756, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32/comments/34889756.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32/_/diff#comment-34889756"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}, "content": {"raw": "that means there is a backlog size of 1. Given that the `dbStateSaveInterval` is set to 3 in the test, there should be a total of 3n + 1 operations performed up to this stage. So when the db is reloaded, it loads the `state` and performs one extra operation on top of the state, which has to be the last operation before the database is reloaded (delete toaster). ", "markup": "markdown", "html": "<p>that means there is a backlog size of 1. Given that the <code>dbStateSaveInterval</code> is set to 3 in the test, there should be a total of 3n + 1 operations performed up to this stage. So when the db is reloaded, it loads the <code>state</code> and performs one extra operation on top of the state, which has to be the last operation before the database is reloaded (delete toaster). </p>", "type": "rendered"}, "created_on": "2017-04-11T23:56:25.178827+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2017-04-11T23:56:25.180902+00:00", "type": "pullrequest_comment", "id": 34892617}, "pull_request": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32/comments/34892465.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32/_/diff#comment-34892465"}}, "parent": {"id": 34888408, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32/comments/34888408.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32/_/diff#comment-34888408"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}, "content": {"raw": "done. 6f6f50b", "markup": "markdown", "html": "<p>done. <a href=\"#!/osrf/cloudsim-grant/commits/6f6f50b\" rel=\"nofollow\" class=\"ap-connect-link\">6f6f50b</a></p>", "type": "rendered"}, "created_on": "2017-04-11T23:51:55.008065+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "inline": {}, "updated_on": "2017-04-11T23:51:55.010571+00:00", "type": "pullrequest_comment", "id": 34892465}, "pull_request": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}}, {"update": {"description": "This PR build on top of pull request #31. Please review that one first.\r\n\r\nThe state of resources is now saved in the database\r\n\r\nAfter updating a server to use these changes, the expected behavior is:\r\n\r\n1. the first time a server is launched and if there exist no states in db, the resources will be reconstructed from the logs (old way). The resources will then be written to db as a key (`[name]:state`) - this is the database state.\r\n\r\n1. subsequent operations, e.g. create resource, grant, revoke, will be written as logs to the db (same as before). A counter (`[name]:state-backlog`) is used to keep track of the number of operations performed after a saved state\r\n\r\n1. once 10000 number of db operations have been written, a new state will be saved which overwrites the old one. The `state-backlog` counter resets to 0.\r\n\r\n1. when the server is redeployed, it loads the latest saved state from db to create the resources. It then uses the counter to determine how many operations are needed to reconstruct the resources back to the most recent state before the redeployment.", "title": "Support saving and reloading database states", "destination": {"commit": {"hash": "6f24e4a17a9d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/commit/6f24e4a17a9d.json"}, "html": {"href": "#!/osrf/cloudsim-grant/commits/6f24e4a17a9d"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant.json"}, "html": {"href": "#!/osrf/cloudsim-grant"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ca19179-2686-45dc-b64a-7b1be2b404de}ts=default"}}, "type": "repository", "name": "cloudsim-grant", "full_name": "osrf/cloudsim-grant", "uuid": "{7ca19179-2686-45dc-b64a-7b1be2b404de}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "6f6f50b691d2", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/commit/6f6f50b691d2.json"}, "html": {"href": "#!/osrf/cloudsim-grant/commits/6f6f50b691d2"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant.json"}, "html": {"href": "#!/osrf/cloudsim-grant"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ca19179-2686-45dc-b64a-7b1be2b404de}ts=default"}}, "type": "repository", "name": "cloudsim-grant", "full_name": "osrf/cloudsim-grant", "uuid": "{7ca19179-2686-45dc-b64a-7b1be2b404de}"}, "branch": {"name": "save_state"}}, "state": "OPEN", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "date": "2017-04-11T23:51:09.431023+00:00"}, "pull_request": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32/comments/34889756.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32/_/diff#comment-34889756"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}, "content": {"raw": "If you clear `eventsList` here and then check it on the callback, you'll see it has one item, for the toaster deletion. Is this expected?", "markup": "markdown", "html": "<p>If you clear <code>eventsList</code> here and then check it on the callback, you'll see it has one item, for the toaster deletion. Is this expected?</p>", "type": "rendered"}, "created_on": "2017-04-11T22:32:14.018429+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2017-04-11T22:32:14.021108+00:00", "type": "pullrequest_comment", "id": 34889756}, "pull_request": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32/comments/34888408.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32/_/diff#comment-34888408"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}, "content": {"raw": "It would be nice to document the new functions", "markup": "markdown", "html": "<p>It would be nice to document the new functions</p>", "type": "rendered"}, "created_on": "2017-04-11T21:58:33.171542+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {}, "updated_on": "2017-04-11T21:58:33.173583+00:00", "type": "pullrequest_comment", "id": 34888408}, "pull_request": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32/comments/34888331.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32/_/diff#comment-34888331"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}, "content": {"raw": "I bumped the minor version on db6bcdd", "markup": "markdown", "html": "<p>I bumped the minor version on <a href=\"#!/osrf/cloudsim-grant/commits/db6bcdd\" rel=\"nofollow\" class=\"ap-connect-link\">db6bcdd</a></p>", "type": "rendered"}, "created_on": "2017-04-11T21:56:52.103203+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2017-04-11T21:56:52.105308+00:00", "type": "pullrequest_comment", "id": 34888331}, "pull_request": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}}, {"update": {"description": "This PR build on top of pull request #31. Please review that one first.\r\n\r\nThe state of resources is now saved in the database\r\n\r\nAfter updating a server to use these changes, the expected behavior is:\r\n\r\n1. the first time a server is launched and if there exist no states in db, the resources will be reconstructed from the logs (old way). The resources will then be written to db as a key (`[name]:state`) - this is the database state.\r\n\r\n1. subsequent operations, e.g. create resource, grant, revoke, will be written as logs to the db (same as before). A counter (`[name]:state-backlog`) is used to keep track of the number of operations performed after a saved state\r\n\r\n1. once 10000 number of db operations have been written, a new state will be saved which overwrites the old one. The `state-backlog` counter resets to 0.\r\n\r\n1. when the server is redeployed, it loads the latest saved state from db to create the resources. It then uses the counter to determine how many operations are needed to reconstruct the resources back to the most recent state before the redeployment.", "title": "Support saving and reloading database states", "destination": {"commit": {"hash": "6f24e4a17a9d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/commit/6f24e4a17a9d.json"}, "html": {"href": "#!/osrf/cloudsim-grant/commits/6f24e4a17a9d"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant.json"}, "html": {"href": "#!/osrf/cloudsim-grant"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ca19179-2686-45dc-b64a-7b1be2b404de}ts=default"}}, "type": "repository", "name": "cloudsim-grant", "full_name": "osrf/cloudsim-grant", "uuid": "{7ca19179-2686-45dc-b64a-7b1be2b404de}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "db6bcdd40815", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/commit/db6bcdd40815.json"}, "html": {"href": "#!/osrf/cloudsim-grant/commits/db6bcdd40815"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant.json"}, "html": {"href": "#!/osrf/cloudsim-grant"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ca19179-2686-45dc-b64a-7b1be2b404de}ts=default"}}, "type": "repository", "name": "cloudsim-grant", "full_name": "osrf/cloudsim-grant", "uuid": "{7ca19179-2686-45dc-b64a-7b1be2b404de}"}, "branch": {"name": "save_state"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2017-04-11T21:56:34.261032+00:00"}, "pull_request": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}}, {"update": {"description": "This PR build on top of pull request #31. Please review that one first.\r\n\r\nThe state of resources is now saved in the database\r\n\r\nAfter updating a server to use these changes, the expected behavior is:\r\n\r\n1. the first time a server is launched and if there exist no states in db, the resources will be reconstructed from the logs (old way). The resources will then be written to db as a key (`[name]:state`) - this is the database state.\r\n\r\n1. subsequent operations, e.g. create resource, grant, revoke, will be written as logs to the db (same as before). A counter (`[name]:state-backlog`) is used to keep track of the number of operations performed after a saved state\r\n\r\n1. once 10000 number of db operations have been written, a new state will be saved which overwrites the old one. The `state-backlog` counter resets to 0.\r\n\r\n1. when the server is redeployed, it loads the latest saved state from db to create the resources. It then uses the counter to determine how many operations are needed to reconstruct the resources back to the most recent state before the redeployment.", "title": "Support saving and reloading database states", "destination": {"commit": {"hash": "6f24e4a17a9d", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/commit/6f24e4a17a9d.json"}, "html": {"href": "#!/osrf/cloudsim-grant/commits/6f24e4a17a9d"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant.json"}, "html": {"href": "#!/osrf/cloudsim-grant"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ca19179-2686-45dc-b64a-7b1be2b404de}ts=default"}}, "type": "repository", "name": "cloudsim-grant", "full_name": "osrf/cloudsim-grant", "uuid": "{7ca19179-2686-45dc-b64a-7b1be2b404de}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "16d205ebb9df", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/commit/16d205ebb9df.json"}, "html": {"href": "#!/osrf/cloudsim-grant/commits/16d205ebb9df"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant.json"}, "html": {"href": "#!/osrf/cloudsim-grant"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ca19179-2686-45dc-b64a-7b1be2b404de}ts=default"}}, "type": "repository", "name": "cloudsim-grant", "full_name": "osrf/cloudsim-grant", "uuid": "{7ca19179-2686-45dc-b64a-7b1be2b404de}"}, "branch": {"name": "save_state"}}, "state": "OPEN", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "date": "2017-04-06T17:37:15.180689+00:00"}, "pull_request": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}}, {"update": {"description": "This PR build on top of pull request #31. Please review that one first.\r\n\r\nThe state of resources is now saved in the database\r\n\r\nAfter updating a server to use these changes, the expected behavior is:\r\n\r\n1. the first time a server is launched and if there exist no states in db, the resources will be reconstructed from the logs (old way). The resources will then be written to db as a key (`[name]:state`) - this is the database state.\r\n\r\n1. subsequent operations, e.g. create resource, grant, revoke, will be written as logs to the db (same as before). A counter (`[name]:state-backlog`) is used to keep track of the number of operations performed after a saved state\r\n\r\n1. once 10000 number of db operations have been written, a new state will be saved which overwrites the old one. The `state-backlog` counter resets to 0.\r\n\r\n1. when the server is redeployed, it loads the latest saved state from db to create the resources. It then uses the counter to determine how many operations are needed to reconstruct the resources back to the most recent state before the redeployment.", "title": "Support saving and reloading database states", "destination": {"commit": {"hash": "9155a2f80bd5", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/commit/9155a2f80bd5.json"}, "html": {"href": "#!/osrf/cloudsim-grant/commits/9155a2f80bd5"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant.json"}, "html": {"href": "#!/osrf/cloudsim-grant"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ca19179-2686-45dc-b64a-7b1be2b404de}ts=default"}}, "type": "repository", "name": "cloudsim-grant", "full_name": "osrf/cloudsim-grant", "uuid": "{7ca19179-2686-45dc-b64a-7b1be2b404de}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "376523e832e4", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/commit/376523e832e4.json"}, "html": {"href": "#!/osrf/cloudsim-grant/commits/376523e832e4"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant.json"}, "html": {"href": "#!/osrf/cloudsim-grant"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ca19179-2686-45dc-b64a-7b1be2b404de}ts=default"}}, "type": "repository", "name": "cloudsim-grant", "full_name": "osrf/cloudsim-grant", "uuid": "{7ca19179-2686-45dc-b64a-7b1be2b404de}"}, "branch": {"name": "save_state"}}, "state": "OPEN", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "date": "2017-03-24T01:34:55.095812+00:00"}, "pull_request": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}}, {"update": {"description": "This PR build on top of pull request #31. Please review that one first.\r\n\r\nThe state of resources is now saved in the database\r\n\r\nAfter updating a server to use these changes, the expected behavior is:\r\n\r\n1. the first time a server is launched and if there exist no states in db, the resources will be reconstructed from the logs (old way). The resources will then be written to db as a key (`[name]:state`) - this is the database state.\r\n\r\n1. subsequent operations, e.g. create resource, grant, revoke, will be written as logs to the db (same as before). A counter (`[name]:state-backlog`) is used to keep track of the number of operations performed after a saved state\r\n\r\n1. once 10000 number of db operations have been written, a new state will be saved which overwrites the old one. The `state-backlog` counter resets to 0.\r\n\r\n1. when the server is redeployed, it loads the latest saved state from db to create the resources. It then uses the counter to determine how many operations are needed to reconstruct the resources back to the most recent state before the redeployment.", "title": "Support saving and reloading database states", "destination": {"commit": {"hash": "9155a2f80bd5", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/commit/9155a2f80bd5.json"}, "html": {"href": "#!/osrf/cloudsim-grant/commits/9155a2f80bd5"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant.json"}, "html": {"href": "#!/osrf/cloudsim-grant"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ca19179-2686-45dc-b64a-7b1be2b404de}ts=default"}}, "type": "repository", "name": "cloudsim-grant", "full_name": "osrf/cloudsim-grant", "uuid": "{7ca19179-2686-45dc-b64a-7b1be2b404de}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "376523e832e4", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/commit/376523e832e4.json"}, "html": {"href": "#!/osrf/cloudsim-grant/commits/376523e832e4"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-grant.json"}, "html": {"href": "#!/osrf/cloudsim-grant"}, "avatar": {"href": "data/bytebucket.org/ravatar/{7ca19179-2686-45dc-b64a-7b1be2b404de}ts=default"}}, "type": "repository", "name": "cloudsim-grant", "full_name": "osrf/cloudsim-grant", "uuid": "{7ca19179-2686-45dc-b64a-7b1be2b404de}"}, "branch": {"name": "save_state"}}, "state": "OPEN", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "date": "2017-03-24T01:34:55.075060+00:00"}, "pull_request": {"type": "pullrequest", "id": 32, "links": {"self": {"href": "data/repositories/osrf/cloudsim-grant/pullrequests/32.json"}, "html": {"href": "#!/osrf/cloudsim-grant/pull-requests/32"}}, "title": "Support saving and reloading database states"}}]}