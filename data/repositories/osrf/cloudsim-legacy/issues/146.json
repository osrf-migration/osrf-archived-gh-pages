{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-legacy.json"}, "html": {"href": "#!/osrf/cloudsim-legacy"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e799e7f6-0caa-464a-97f8-8605a37ebfb1}ts=python"}}, "type": "repository", "name": "cloudsim-legacy", "full_name": "osrf/cloudsim-legacy", "uuid": "{e799e7f6-0caa-464a-97f8-8605a37ebfb1}"}, "links": {"attachments": {"href": "data/repositories/osrf/cloudsim-legacy/issues/146/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/cloudsim-legacy/issues/146.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/cloudsim-legacy/issues/146/watch"}, "comments": {"href": "data/repositories/osrf/cloudsim-legacy/issues/146/comments_page=1.json"}, "html": {"href": "#!/osrf/cloudsim-legacy/issues/146/openstack-dhcp"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/cloudsim-legacy/issues/146/vote"}}, "reporter": {"display_name": "Hugo Boyer", "uuid": "{3d87874e-7099-4981-b04f-57f0272faa7d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D"}, "html": {"href": "https://bitbucket.org/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/21198da8539b599e3633017f5f5f8150d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsHB-6.png"}}, "nickname": "hugomatic", "type": "user", "account_id": "557058:869c02bb-b246-4cdc-9db3-0064e8add185"}, "title": "OpenStack dhcp", "component": null, "votes": 0, "watches": 1, "content": {"raw": "I'm having problems running the puppet-vagrant branch. I can install the software successfully, but I am not able to create instances with the correct IP. \r\n\r\nThis was found in the log when trying to launch a cirros instance with the desired IPs: \r\n* 172.16.1.2\r\n* 10.10.1.1\r\n\r\nThis problems seems to be in the vagrant virtual machine (since it is where OpenStack is installed), but it could also be a problem with the host (since it works on other machines)\r\n\r\nAny thoughs?\r\n\r\n```\r\n#!bash\r\n\r\nStarting network...\r\nudhcpc (v1.20.1) started\r\nSending discover...\r\nSending select for 172.16.1.2...\r\nReceived DHCP NAK\r\nSending discover...\r\nSending select for 192.168.56.101...\r\nLease of 192.168.56.101 obtained, lease time 3600\r\ncirros-ds 'net' up at 12.09\r\nchecking http://169.254.169.254/2009-04-04/instance-id\r\nfailed 1/20: up 12.46. request failed\r\nfailed 2/20: up 14.70. request failed\r\nfailed 3/20: up 16.97. request failed\r\nfailed 4/20: up 19.22. request failed\r\nfailed 5/20: up 21.46. request failed\r\nfailed 6/20: up 23.78. request failed\r\nfailed 7/20: up 26.11. request failed\r\nfailed 8/20: up 28.39. request failed\r\nfailed 9/20: up 30.64. request failed\r\nfailed 10/20: up 32.89. request failed\r\nfailed 11/20: up 35.14. request failed\r\nfailed 12/20: up 37.38. request failed\r\nfailed 13/20: up 39.74. request failed\r\nfailed 14/20: up 42.01. request failed\r\nfailed 15/20: up 44.28. request failed\r\nfailed 16/20: up 46.58. request failed\r\nfailed 17/20: up 48.84. request failed\r\nfailed 18/20: up 51.09. request failed\r\nfailed 19/20: up 53.36. request failed\r\nfailed 20/20: up 55.67. request failed\r\nfailed to read iid from metadata. tried 20\r\nno results found for mode=net. up 57.97. searched: nocloud configdrive ec2\r\nfailed to get instance-id of datasource\r\nStarting dropbear sshd: generating rsa key... generating dsa key... OK\r\n=== network info ===\r\nif-info: lo,up,127.0.0.1,8,::1\r\nif-info: eth0,up,192.168.56.101,24,fe80::f816:3eff:fe66:8055\r\nip-route:192.168.56.0/24 dev eth0  src 192.168.56.101 \r\n```", "markup": "markdown", "html": "<p>I'm having problems running the puppet-vagrant branch. I can install the software successfully, but I am not able to create instances with the correct IP. </p>\n<p>This was found in the log when trying to launch a cirros instance with the desired IPs: \n<em> 172.16.1.2\n</em> 10.10.1.1</p>\n<p>This problems seems to be in the vagrant virtual machine (since it is where OpenStack is installed), but it could also be a problem with the host (since it works on other machines)</p>\n<p>Any thoughs?</p>\n<div class=\"codehilite language-bash\"><pre><span></span>Starting network...\nudhcpc <span class=\"o\">(</span>v1.20.1<span class=\"o\">)</span> started\nSending discover...\nSending <span class=\"k\">select</span> <span class=\"k\">for</span> <span class=\"m\">172</span>.16.1.2...\nReceived DHCP NAK\nSending discover...\nSending <span class=\"k\">select</span> <span class=\"k\">for</span> <span class=\"m\">192</span>.168.56.101...\nLease of <span class=\"m\">192</span>.168.56.101 obtained, lease <span class=\"nb\">time</span> <span class=\"m\">3600</span>\ncirros-ds <span class=\"s1\">&#39;net&#39;</span> up at <span class=\"m\">12</span>.09\nchecking http://169.254.169.254/2009-04-04/instance-id\nfailed <span class=\"m\">1</span>/20: up <span class=\"m\">12</span>.46. request failed\nfailed <span class=\"m\">2</span>/20: up <span class=\"m\">14</span>.70. request failed\nfailed <span class=\"m\">3</span>/20: up <span class=\"m\">16</span>.97. request failed\nfailed <span class=\"m\">4</span>/20: up <span class=\"m\">19</span>.22. request failed\nfailed <span class=\"m\">5</span>/20: up <span class=\"m\">21</span>.46. request failed\nfailed <span class=\"m\">6</span>/20: up <span class=\"m\">23</span>.78. request failed\nfailed <span class=\"m\">7</span>/20: up <span class=\"m\">26</span>.11. request failed\nfailed <span class=\"m\">8</span>/20: up <span class=\"m\">28</span>.39. request failed\nfailed <span class=\"m\">9</span>/20: up <span class=\"m\">30</span>.64. request failed\nfailed <span class=\"m\">10</span>/20: up <span class=\"m\">32</span>.89. request failed\nfailed <span class=\"m\">11</span>/20: up <span class=\"m\">35</span>.14. request failed\nfailed <span class=\"m\">12</span>/20: up <span class=\"m\">37</span>.38. request failed\nfailed <span class=\"m\">13</span>/20: up <span class=\"m\">39</span>.74. request failed\nfailed <span class=\"m\">14</span>/20: up <span class=\"m\">42</span>.01. request failed\nfailed <span class=\"m\">15</span>/20: up <span class=\"m\">44</span>.28. request failed\nfailed <span class=\"m\">16</span>/20: up <span class=\"m\">46</span>.58. request failed\nfailed <span class=\"m\">17</span>/20: up <span class=\"m\">48</span>.84. request failed\nfailed <span class=\"m\">18</span>/20: up <span class=\"m\">51</span>.09. request failed\nfailed <span class=\"m\">19</span>/20: up <span class=\"m\">53</span>.36. request failed\nfailed <span class=\"m\">20</span>/20: up <span class=\"m\">55</span>.67. request failed\nfailed to <span class=\"nb\">read</span> iid from metadata. tried <span class=\"m\">20</span>\nno results found <span class=\"k\">for</span> <span class=\"nv\">mode</span><span class=\"o\">=</span>net. up <span class=\"m\">57</span>.97. searched: nocloud configdrive ec2\nfailed to get instance-id of datasource\nStarting dropbear sshd: generating rsa key... generating dsa key... <span class=\"nv\">OK</span>\n<span class=\"o\">===</span> network <span class=\"nv\">info</span> <span class=\"o\">===</span>\n<span class=\"k\">if</span>-info: lo,up,127.0.0.1,8,::1\n<span class=\"k\">if</span>-info: eth0,up,192.168.56.101,24,fe80::f816:3eff:fe66:8055\nip-route:192.168.56.0/24 dev eth0  src <span class=\"m\">192</span>.168.56.101 \n</pre></div>", "type": "rendered"}, "assignee": {"display_name": "Esteve Fernandez", "uuid": "{b7fa67b3-197b-4687-b526-5583299eb942}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bb7fa67b3-197b-4687-b526-5583299eb942%7D"}, "html": {"href": "https://bitbucket.org/%7Bb7fa67b3-197b-4687-b526-5583299eb942%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/7ed10afdd3c291802b6244f32229c8e1d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsEF-5.png"}}, "nickname": "esteve", "type": "user", "account_id": "557058:58cd8911-f7d9-4a4c-bc21-0f94eb1716d7"}, "state": "invalid", "version": null, "edited_on": null, "created_on": "2013-07-18T00:31:02.679661+00:00", "milestone": null, "updated_on": "2013-12-02T18:27:02.874313+00:00", "type": "issue", "id": 146}