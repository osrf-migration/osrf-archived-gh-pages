{"links": {"self": {"href": "data/repositories/osrf/gazebo_experimental/issues/16/comments/36676502.json"}, "html": {"href": "#!/osrf/gazebo_experimental/issues/16#comment-36676502"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/gazebo_experimental/issues/16.json"}}, "type": "issue", "id": 16, "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo_experimental.json"}, "html": {"href": "#!/osrf/gazebo_experimental"}, "avatar": {"href": "data/bytebucket.org/ravatar/{bc79acda-fe93-46b4-96a4-f1603142a10a}ts=c_plus_plus"}}, "type": "repository", "name": "gazebo_experimental", "full_name": "osrf/gazebo_experimental", "uuid": "{bc79acda-fe93-46b4-96a4-f1603142a10a}"}, "title": "Add time taken metrics and a way to view them in real time"}, "content": {"raw": "I have two branches that I just resolved conflicts for in gazebo, though I haven't checked that they compile. The current diagnostics system lets you get timing info by placing macros throughout the code and then publishing it and writing it to a file.\n\n* [diagnostics_scpeters](https://bitbucket.org/osrf/gazebo/compare/diagnostics_scpeters%0Dgazebo7#diff): this branch heavily refactors the file that is written so it only publishes statistics about the timing (mean, max-abs) instead of logging every single time. I found this much easier to parse. Here's an example of one of the files it creates:\n\n~~~\nWorld::Update                                     maxAbs 6.073124e-03   mean   8.419458e-04   \nWorld::Update::ContactManager::PublishContacts    maxAbs 6.070371e-03   mean   8.404391e-04   \nWorld::Update::LogRecordNotify                    maxAbs 6.007031e-03   mean   8.104208e-04   \nWorld::Update::PhysicsEngine::UpdatePhysics       maxAbs 4.618062e-03   mean   7.611499e-04   \nWorld::Update::PhysicsEngine::UpdateCollision     maxAbs 2.952573e-03   mean   1.157201e-04   \nWorld::Update::SetWorldPose(dirtyPoses)           maxAbs 6.002424e-03   mean   8.091370e-04   \nWorld::Update::Model::Update                      maxAbs 5.938560e-04   mean   4.594276e-05   \nWorld::Update::Events::worldUpdateBegin           maxAbs 1.122670e-04   mean   3.632071e-06   \nWorld::Update::needsReset                         maxAbs 5.240300e-05   mean   3.203250e-07   \n~~~\n\n* [thread_diagnostics_transport_islands](https://bitbucket.org/osrf/gazebo/compare/thread_diagnostics_transport_islands%0Dgazebo7#diff): I wanted to get diagnostic information about the gazebo transport system, so I removed publishing of diagnostic information from this branch. I think writing a file of statistics will have lower overhead than publishing all the data in real-time, though it isn't available in real-time.", "markup": "markdown", "html": "<p>I have two branches that I just resolved conflicts for in gazebo, though I haven't checked that they compile. The current diagnostics system lets you get timing info by placing macros throughout the code and then publishing it and writing it to a file.</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/gazebo/compare/diagnostics_scpeters%0Dgazebo7#diff\" rel=\"nofollow\">diagnostics_scpeters</a>: this branch heavily refactors the file that is written so it only publishes statistics about the timing (mean, max-abs) instead of logging every single time. I found this much easier to parse. Here's an example of one of the files it creates:</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>World::Update                                     maxAbs 6.073124e-03   mean   8.419458e-04   \nWorld::Update::ContactManager::PublishContacts    maxAbs 6.070371e-03   mean   8.404391e-04   \nWorld::Update::LogRecordNotify                    maxAbs 6.007031e-03   mean   8.104208e-04   \nWorld::Update::PhysicsEngine::UpdatePhysics       maxAbs 4.618062e-03   mean   7.611499e-04   \nWorld::Update::PhysicsEngine::UpdateCollision     maxAbs 2.952573e-03   mean   1.157201e-04   \nWorld::Update::SetWorldPose(dirtyPoses)           maxAbs 6.002424e-03   mean   8.091370e-04   \nWorld::Update::Model::Update                      maxAbs 5.938560e-04   mean   4.594276e-05   \nWorld::Update::Events::worldUpdateBegin           maxAbs 1.122670e-04   mean   3.632071e-06   \nWorld::Update::needsReset                         maxAbs 5.240300e-05   mean   3.203250e-07   \n</pre></div>\n\n\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/gazebo/compare/thread_diagnostics_transport_islands%0Dgazebo7#diff\" rel=\"nofollow\">thread_diagnostics_transport_islands</a>: I wanted to get diagnostic information about the gazebo transport system, so I removed publishing of diagnostic information from this branch. I think writing a file of statistics will have lower overhead than publishing all the data in real-time, though it isn't available in real-time.</li>\n</ul>", "type": "rendered"}, "created_on": "2017-05-09T16:25:42.257092+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 36676502}