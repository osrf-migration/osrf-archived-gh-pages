{"rendered": {"description": {"raw": "The instance status update loop is the cause of missing ip. Specifically, it overwrites simulator resource data in the database.\r\n\r\nThe function calls `getAllNonTerminatedSimulators` to get a **copy** of simulator resources. It then updates fields in the copy (e.g. status, term time, etc) and stores the copy back to the DB. This is bad because  during this time, simulator resource data in the DB can change (e.g. IP address!). So to fix this, we re-read the latest simulator resource data from DB before each update.\r\n\r\nIdeally, we should be able to just update a specific field of the simulator instead of the whole simulator resource. But that's not supported by csgrant.\r\n\r\nThe missing aws termination date issue observed during the SRC could also be due to the same problem.", "markup": "markdown", "html": "<p>The instance status update loop is the cause of missing ip. Specifically, it overwrites simulator resource data in the database.</p>\n<p>The function calls <code>getAllNonTerminatedSimulators</code> to get a <strong>copy</strong> of simulator resources. It then updates fields in the copy (e.g. status, term time, etc) and stores the copy back to the DB. This is bad because  during this time, simulator resource data in the DB can change (e.g. IP address!). So to fix this, we re-read the latest simulator resource data from DB before each update.</p>\n<p>Ideally, we should be able to just update a specific field of the simulator instead of the whole simulator resource. But that's not supported by csgrant.</p>\n<p>The missing aws termination date issue observed during the SRC could also be due to the same problem.</p>", "type": "rendered"}, "title": {"raw": "Fix simulator missing ip", "markup": "markdown", "html": "<p>Fix simulator missing ip</p>", "type": "rendered"}}, "type": "pullrequest", "description": "The instance status update loop is the cause of missing ip. Specifically, it overwrites simulator resource data in the database.\r\n\r\nThe function calls `getAllNonTerminatedSimulators` to get a **copy** of simulator resources. It then updates fields in the copy (e.g. status, term time, etc) and stores the copy back to the DB. This is bad because  during this time, simulator resource data in the DB can change (e.g. IP address!). So to fix this, we re-read the latest simulator resource data from DB before each update.\r\n\r\nIdeally, we should be able to just update a specific field of the simulator instead of the whole simulator resource. But that's not supported by csgrant.\r\n\r\nThe missing aws termination date issue observed during the SRC could also be due to the same problem.", "links": {"decline": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/cloudsim-portal/pullrequests/102/decline"}, "diffstat": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/cloudsim-portal/diffstat/osrf/cloudsim-portal:c7c067af22ef%0Dc6d0bde8d6e4?from_pullrequest_id=102"}, "commits": {"href": "data/repositories/osrf/cloudsim-portal/pullrequests/102/commits.json"}, "self": {"href": "data/repositories/osrf/cloudsim-portal/pullrequests/102.json"}, "comments": {"href": "data/repositories/osrf/cloudsim-portal/pullrequests/102/comments_page=1.json"}, "merge": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/cloudsim-portal/pullrequests/102/merge"}, "html": {"href": "#!/osrf/cloudsim-portal/pull-requests/102"}, "activity": {"href": "data/repositories/osrf/cloudsim-portal/pullrequests/102/activity.json"}, "diff": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/cloudsim-portal/diff/osrf/cloudsim-portal:c7c067af22ef%0Dc6d0bde8d6e4?from_pullrequest_id=102"}, "approve": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/cloudsim-portal/pullrequests/102/approve"}, "statuses": {"href": "data/repositories/osrf/cloudsim-portal/pullrequests/102/statuses_page=1.json"}}, "title": "Fix simulator missing ip", "close_source_branch": true, "reviewers": [], "id": 102, "destination": {"commit": {"hash": "c6d0bde8d6e4", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/commit/c6d0bde8d6e4.json"}, "html": {"href": "#!/osrf/cloudsim-portal/commits/c6d0bde8d6e4"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal.json"}, "html": {"href": "#!/osrf/cloudsim-portal"}, "avatar": {"href": "data/bytebucket.org/ravatar/{ccc09dfa-4343-4a4f-8bdc-a83865647cef}ts=default"}}, "type": "repository", "name": "cloudsim-portal", "full_name": "osrf/cloudsim-portal", "uuid": "{ccc09dfa-4343-4a4f-8bdc-a83865647cef}"}, "branch": {"name": "default"}}, "created_on": "2017-07-19T00:03:16.114409+00:00", "summary": {"raw": "The instance status update loop is the cause of missing ip. Specifically, it overwrites simulator resource data in the database.\r\n\r\nThe function calls `getAllNonTerminatedSimulators` to get a **copy** of simulator resources. It then updates fields in the copy (e.g. status, term time, etc) and stores the copy back to the DB. This is bad because  during this time, simulator resource data in the DB can change (e.g. IP address!). So to fix this, we re-read the latest simulator resource data from DB before each update.\r\n\r\nIdeally, we should be able to just update a specific field of the simulator instead of the whole simulator resource. But that's not supported by csgrant.\r\n\r\nThe missing aws termination date issue observed during the SRC could also be due to the same problem.", "markup": "markdown", "html": "<p>The instance status update loop is the cause of missing ip. Specifically, it overwrites simulator resource data in the database.</p>\n<p>The function calls <code>getAllNonTerminatedSimulators</code> to get a <strong>copy</strong> of simulator resources. It then updates fields in the copy (e.g. status, term time, etc) and stores the copy back to the DB. This is bad because  during this time, simulator resource data in the DB can change (e.g. IP address!). So to fix this, we re-read the latest simulator resource data from DB before each update.</p>\n<p>Ideally, we should be able to just update a specific field of the simulator instead of the whole simulator resource. But that's not supported by csgrant.</p>\n<p>The missing aws termination date issue observed during the SRC could also be due to the same problem.</p>", "type": "rendered"}, "source": {"commit": {"hash": "c10fba0048b1", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/commit/c10fba0048b1.json"}, "html": {"href": "#!/osrf/cloudsim-portal/commits/c10fba0048b1"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal.json"}, "html": {"href": "#!/osrf/cloudsim-portal"}, "avatar": {"href": "data/bytebucket.org/ravatar/{ccc09dfa-4343-4a4f-8bdc-a83865647cef}ts=default"}}, "type": "repository", "name": "cloudsim-portal", "full_name": "osrf/cloudsim-portal", "uuid": "{ccc09dfa-4343-4a4f-8bdc-a83865647cef}"}, "branch": {"name": "sim_resource_update"}}, "comment_count": 5, "state": "MERGED", "task_count": 0, "participants": [{"role": "PARTICIPANT", "participated_on": "2017-07-19T17:24:10.968266+00:00", "type": "participant", "approved": true, "user": {"display_name": "Patricio Reyna Almandos", "uuid": "{8d07164d-cee3-4eb0-8816-97f42c297bc3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B8d07164d-cee3-4eb0-8816-97f42c297bc3%7D"}, "html": {"href": "https://bitbucket.org/%7B8d07164d-cee3-4eb0-8816-97f42c297bc3%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2f4f0911-c46a-4f3c-92af-650544415846/235d39e4-77b1-46b7-ac0f-900424378fef/128"}}, "nickname": "Patricio Reyna Almandos", "type": "user", "account_id": "557058:2f4f0911-c46a-4f3c-92af-650544415846"}}, {"role": "PARTICIPANT", "participated_on": "2017-07-19T17:11:46.141849+00:00", "type": "participant", "approved": false, "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}], "reason": "", "updated_on": "2017-07-19T17:50:36.552031+00:00", "author": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "merge_commit": {"hash": "c7c067af22ef", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/commit/c7c067af22ef.json"}, "html": {"href": "#!/osrf/cloudsim-portal/commits/c7c067af22ef"}}}, "closed_by": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}}