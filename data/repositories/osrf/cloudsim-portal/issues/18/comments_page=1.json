{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/issues/18/comments/34511277.json"}, "html": {"href": "#!/osrf/cloudsim-portal/issues/18#comment-34511277"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/issues/18.json"}}, "type": "issue", "id": 18, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal.json"}, "html": {"href": "#!/osrf/cloudsim-portal"}, "avatar": {"href": "data/bytebucket.org/ravatar/{ccc09dfa-4343-4a4f-8bdc-a83865647cef}ts=default"}}, "type": "repository", "name": "cloudsim-portal", "full_name": "osrf/cloudsim-portal", "uuid": "{ccc09dfa-4343-4a4f-8bdc-a83865647cef}"}, "title": "ssh keys sometimes are not valid"}, "content": {"raw": "the payload ssh key is incorrect:\n\n\n```\n#!js\n\n> tftest.data.sshArbiter\n'sshkey-055'\n> tftest.data.bluepayloads[0].options.ssh\n'https://portal.cloudsim.io/sshkeys/undefined'\n\n```", "markup": "markdown", "html": "<p>the payload ssh key is incorrect:</p>\n<div class=\"codehilite language-js\"><pre><span></span><span class=\"o\">&gt;</span> <span class=\"nx\">tftest</span><span class=\"p\">.</span><span class=\"nx\">data</span><span class=\"p\">.</span><span class=\"nx\">sshArbiter</span>\n<span class=\"s1\">&#39;sshkey-055&#39;</span>\n<span class=\"o\">&gt;</span> <span class=\"nx\">tftest</span><span class=\"p\">.</span><span class=\"nx\">data</span><span class=\"p\">.</span><span class=\"nx\">bluepayloads</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">].</span><span class=\"nx\">options</span><span class=\"p\">.</span><span class=\"nx\">ssh</span>\n<span class=\"s1\">&#39;https://portal.cloudsim.io/sshkeys/undefined&#39;</span>\n</pre></div>", "type": "rendered"}, "created_on": "2017-02-19T01:34:30.244495+00:00", "user": {"display_name": "Hugo Boyer", "uuid": "{3d87874e-7099-4981-b04f-57f0272faa7d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D"}, "html": {"href": "https://bitbucket.org/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/21198da8539b599e3633017f5f5f8150d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsHB-6.png"}}, "nickname": "hugomatic", "type": "user", "account_id": "557058:869c02bb-b246-4cdc-9db3-0064e8add185"}, "updated_on": null, "type": "issue_comment", "id": 34511277}, {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/issues/18/comments/34511657.json"}, "html": {"href": "#!/osrf/cloudsim-portal/issues/18#comment-34511657"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/issues/18.json"}}, "type": "issue", "id": 18, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal.json"}, "html": {"href": "#!/osrf/cloudsim-portal"}, "avatar": {"href": "data/bytebucket.org/ravatar/{ccc09dfa-4343-4a4f-8bdc-a83865647cef}ts=default"}}, "type": "repository", "name": "cloudsim-portal", "full_name": "osrf/cloudsim-portal", "uuid": "{ccc09dfa-4343-4a4f-8bdc-a83865647cef}"}, "title": "ssh keys sometimes are not valid"}, "content": {"raw": "tf4 doesn't have the issue\n```\n#!nodejs\nx[140].data.name\n'tftest4'\nx[140].data.bluepayloads[0].sshkey\n'sshkey-066'\n\n```\ncloudsim here means that the portal had no sshkey property set on the round data.\n\n```\n#!nodejs\nx[137].data.name\n'tftest'\nx[137].data.bluepayloads[0].sshkey\n'cloudsim'\n```\nUsing an old version of the page that predates the sshkey generation? it doesn't seem likely.\n\nThe sshkey data is normally set in a callback, where the e.detail.id is the sshkey-xxx id and propertyName would be the path to set in the round data: \"sacround.sshArbiter\".\n\n\n```\n#!js\n\n      _onSshKeyGenerated(propertyName, e) {\n        const keyResourceId = e.detail.id\n        // Share key with all admins\n        const data = { grantee: 'sasc-admins',\n                       resource: keyResourceId,\n                       readonly: false }\n        this.$.portalgrant.grant(data)\n```\nPerhaps that callback did not get invoked. That would explain the \"cloudsim\" default key that was used. Was the call to generate a key issued, or a key generated?", "markup": "markdown", "html": "<p>tf4 doesn't have the issue</p>\n<div class=\"codehilite language-nodejs\"><pre><span></span>x[140].data.name\n&#39;tftest4&#39;\nx[140].data.bluepayloads[0].sshkey\n&#39;sshkey-066&#39;\n</pre></div>\n\n\n<p>cloudsim here means that the portal had no sshkey property set on the round data.</p>\n<div class=\"codehilite language-nodejs\"><pre><span></span>x[137].data.name\n&#39;tftest&#39;\nx[137].data.bluepayloads[0].sshkey\n&#39;cloudsim&#39;\n</pre></div>\n\n\n<p>Using an old version of the page that predates the sshkey generation? it doesn't seem likely.</p>\n<p>The sshkey data is normally set in a callback, where the e.detail.id is the sshkey-xxx id and propertyName would be the path to set in the round data: \"sacround.sshArbiter\".</p>\n<div class=\"codehilite language-js\"><pre><span></span>      <span class=\"nx\">_onSshKeyGenerated</span><span class=\"p\">(</span><span class=\"nx\">propertyName</span><span class=\"p\">,</span> <span class=\"nx\">e</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"kr\">const</span> <span class=\"nx\">keyResourceId</span> <span class=\"o\">=</span> <span class=\"nx\">e</span><span class=\"p\">.</span><span class=\"nx\">detail</span><span class=\"p\">.</span><span class=\"nx\">id</span>\n        <span class=\"c1\">// Share key with all admins</span>\n        <span class=\"kr\">const</span> <span class=\"nx\">data</span> <span class=\"o\">=</span> <span class=\"p\">{</span> <span class=\"nx\">grantee</span><span class=\"o\">:</span> <span class=\"s1\">&#39;sasc-admins&#39;</span><span class=\"p\">,</span>\n                       <span class=\"nx\">resource</span><span class=\"o\">:</span> <span class=\"nx\">keyResourceId</span><span class=\"p\">,</span>\n                       <span class=\"nx\">readonly</span><span class=\"o\">:</span> <span class=\"kc\">false</span> <span class=\"p\">}</span>\n        <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">$</span><span class=\"p\">.</span><span class=\"nx\">portalgrant</span><span class=\"p\">.</span><span class=\"nx\">grant</span><span class=\"p\">(</span><span class=\"nx\">data</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>Perhaps that callback did not get invoked. That would explain the \"cloudsim\" default key that was used. Was the call to generate a key issued, or a key generated?</p>", "type": "rendered"}, "created_on": "2017-02-19T03:36:16.222191+00:00", "user": {"display_name": "Hugo Boyer", "uuid": "{3d87874e-7099-4981-b04f-57f0272faa7d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D"}, "html": {"href": "https://bitbucket.org/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/21198da8539b599e3633017f5f5f8150d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsHB-6.png"}}, "nickname": "hugomatic", "type": "user", "account_id": "557058:869c02bb-b246-4cdc-9db3-0064e8add185"}, "updated_on": null, "type": "issue_comment", "id": 34511657}, {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/issues/18/comments/34610084.json"}, "html": {"href": "#!/osrf/cloudsim-portal/issues/18#comment-34610084"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/issues/18.json"}}, "type": "issue", "id": 18, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal.json"}, "html": {"href": "#!/osrf/cloudsim-portal"}, "avatar": {"href": "data/bytebucket.org/ravatar/{ccc09dfa-4343-4a4f-8bdc-a83865647cef}ts=default"}}, "type": "repository", "name": "cloudsim-portal", "full_name": "osrf/cloudsim-portal", "uuid": "{ccc09dfa-4343-4a4f-8bdc-a83865647cef}"}, "title": "ssh keys sometimes are not valid"}, "content": {"raw": "These are the keys presently on the server:\n\n![Screenshot from 2017-02-22 14-16-54.png](data/bitbucket.org/repo/ykbEq8/images/390384228-Screenshot_from_2017-02-22_14-16-54.png)\n\nThey are normally deleted when a round is terminated. Round \"tftest4\" (sucessful)  used \"ssh-key-064\" for the arbiter, \"sshkey-065\" for the (only) gold payload and \"ssh-key-066\" for the blue payload. These keys have been deleted.", "markup": "markdown", "html": "<p>These are the keys presently on the server:</p>\n<p><img alt=\"Screenshot from 2017-02-22 14-16-54.png\" src=\"data/bitbucket.org/repo/ykbEq8/images/390384228-Screenshot_from_2017-02-22_14-16-54.png\" /></p>\n<p>They are normally deleted when a round is terminated. Round \"tftest4\" (sucessful)  used \"ssh-key-064\" for the arbiter, \"sshkey-065\" for the (only) gold payload and \"ssh-key-066\" for the blue payload. These keys have been deleted.</p>", "type": "rendered"}, "created_on": "2017-02-22T22:26:48.271975+00:00", "user": {"display_name": "Hugo Boyer", "uuid": "{3d87874e-7099-4981-b04f-57f0272faa7d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D"}, "html": {"href": "https://bitbucket.org/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/21198da8539b599e3633017f5f5f8150d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsHB-6.png"}}, "nickname": "hugomatic", "type": "user", "account_id": "557058:869c02bb-b246-4cdc-9db3-0064e8add185"}, "updated_on": null, "type": "issue_comment", "id": 34610084}, {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/issues/18/comments/34611740.json"}, "html": {"href": "#!/osrf/cloudsim-portal/issues/18#comment-34611740"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/issues/18.json"}}, "type": "issue", "id": 18, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal.json"}, "html": {"href": "#!/osrf/cloudsim-portal"}, "avatar": {"href": "data/bytebucket.org/ravatar/{ccc09dfa-4343-4a4f-8bdc-a83865647cef}ts=default"}}, "type": "repository", "name": "cloudsim-portal", "full_name": "osrf/cloudsim-portal", "uuid": "{ccc09dfa-4343-4a4f-8bdc-a83865647cef}"}, "title": "ssh keys sometimes are not valid"}, "content": {"raw": "Going through the database with @hugomatic, it looks like the key ids were incremented on the database, but the keys were never generated. This places the error somewhere between `csgrant.getNextResourceId` (which succeeded in incrementing the ids), and `csgrant.createResource` (which failed to create a resource on the database).\n\n#!/osrf/cloudsim-portal/src/8d358936d83b94b175d663faa2eb10a0ccbf82a2/server/sshkeys.js?at=default&fileviewer=file-view-default#sshkeys.js-91", "markup": "markdown", "html": "<p>Going through the database with @hugomatic, it looks like the key ids were incremented on the database, but the keys were never generated. This places the error somewhere between <code>csgrant.getNextResourceId</code> (which succeeded in incrementing the ids), and <code>csgrant.createResource</code> (which failed to create a resource on the database).</p>\n<p><a href=\"#!/osrf/cloudsim-portal/src/8d358936d83b94b175d663faa2eb10a0ccbf82a2/server/sshkeys.js?at=default&amp;fileviewer=file-view-default#sshkeys.js-91\" rel=\"nofollow\" class=\"ap-connect-link\">#!/osrf/cloudsim-portal/src/8d358936d83b94b175d663faa2eb10a0ccbf82a2/server/sshkeys.js?at=default&amp;fileviewer=file-view-default#sshkeys.js-91</a></p>", "type": "rendered"}, "created_on": "2017-02-23T00:24:22.809199+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": null, "type": "issue_comment", "id": 34611740}, {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/issues/18/comments/34611829.json"}, "html": {"href": "#!/osrf/cloudsim-portal/issues/18#comment-34611829"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/issues/18.json"}}, "type": "issue", "id": 18, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal.json"}, "html": {"href": "#!/osrf/cloudsim-portal"}, "avatar": {"href": "data/bytebucket.org/ravatar/{ccc09dfa-4343-4a4f-8bdc-a83865647cef}ts=default"}}, "type": "repository", "name": "cloudsim-portal", "full_name": "osrf/cloudsim-portal", "uuid": "{ccc09dfa-4343-4a4f-8bdc-a83865647cef}"}, "title": "ssh keys sometimes are not valid"}, "content": {"raw": "There were no new deployment at the time of the errors. the format of the errors.\n\nWe are not able to reproduce them at this time. @chapulina and I tried to launch a new round (the \"launch\" button on the round page) right after generating a round (the \"continue \" button on the kiosk page).", "markup": "markdown", "html": "<p>There were no new deployment at the time of the errors. the format of the errors.</p>\n<p>We are not able to reproduce them at this time. @chapulina and I tried to launch a new round (the \"launch\" button on the round page) right after generating a round (the \"continue \" button on the kiosk page).</p>", "type": "rendered"}, "created_on": "2017-02-23T00:32:52.788310+00:00", "user": {"display_name": "Hugo Boyer", "uuid": "{3d87874e-7099-4981-b04f-57f0272faa7d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D"}, "html": {"href": "https://bitbucket.org/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/21198da8539b599e3633017f5f5f8150d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsHB-6.png"}}, "nickname": "hugomatic", "type": "user", "account_id": "557058:869c02bb-b246-4cdc-9db3-0064e8add185"}, "updated_on": null, "type": "issue_comment", "id": 34611829}, {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/issues/18/comments/34613133.json"}, "html": {"href": "#!/osrf/cloudsim-portal/issues/18#comment-34613133"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/issues/18.json"}}, "type": "issue", "id": 18, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal.json"}, "html": {"href": "#!/osrf/cloudsim-portal"}, "avatar": {"href": "data/bytebucket.org/ravatar/{ccc09dfa-4343-4a4f-8bdc-a83865647cef}ts=default"}}, "type": "repository", "name": "cloudsim-portal", "full_name": "osrf/cloudsim-portal", "uuid": "{ccc09dfa-4343-4a4f-8bdc-a83865647cef}"}, "title": "ssh keys sometimes are not valid"}, "content": {"raw": "One thing that we can see from the first image is that the error message is [object, object]. This problem is fixed here: https://github.com/osrf/gz-resources/pull/8", "markup": "markdown", "html": "<p>One thing that we can see from the first image is that the error message is [object, object]. This problem is fixed here: <a href=\"https://github.com/osrf/gz-resources/pull/8\" rel=\"nofollow\" class=\"ap-connect-link\">https://github.com/osrf/gz-resources/pull/8</a></p>", "type": "rendered"}, "created_on": "2017-02-23T03:01:35.168076+00:00", "user": {"display_name": "Hugo Boyer", "uuid": "{3d87874e-7099-4981-b04f-57f0272faa7d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D"}, "html": {"href": "https://bitbucket.org/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/21198da8539b599e3633017f5f5f8150d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsHB-6.png"}}, "nickname": "hugomatic", "type": "user", "account_id": "557058:869c02bb-b246-4cdc-9db3-0064e8add185"}, "updated_on": null, "type": "issue_comment", "id": 34613133}, {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/issues/18/comments/34663646.json"}, "html": {"href": "#!/osrf/cloudsim-portal/issues/18#comment-34663646"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/issues/18.json"}}, "type": "issue", "id": 18, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal.json"}, "html": {"href": "#!/osrf/cloudsim-portal"}, "avatar": {"href": "data/bytebucket.org/ravatar/{ccc09dfa-4343-4a4f-8bdc-a83865647cef}ts=default"}}, "type": "repository", "name": "cloudsim-portal", "full_name": "osrf/cloudsim-portal", "uuid": "{ccc09dfa-4343-4a4f-8bdc-a83865647cef}"}, "title": "ssh keys sometimes are not valid"}, "content": {"raw": "We found a more detailed error message: ![ssh_key_error_details.png](data/bitbucket.org/repo/ykbEq8/images/1295254514-ssh_key_error_details.png)\n\nIt also is correlated to my computer running Chromium. Version 55.0.2883.87 Built on Ubuntu\n\nWe also reproduced it on dev.cloudsim.io.", "markup": "markdown", "html": "<p>We found a more detailed error message: <img alt=\"ssh_key_error_details.png\" src=\"data/bitbucket.org/repo/ykbEq8/images/1295254514-ssh_key_error_details.png\" /></p>\n<p>It also is correlated to my computer running Chromium. Version 55.0.2883.87 Built on Ubuntu</p>\n<p>We also reproduced it on dev.cloudsim.io.</p>", "type": "rendered"}, "created_on": "2017-02-24T02:49:07.018091+00:00", "user": {"display_name": "Tully Foote", "uuid": "{3d90dbd4-b845-466f-b5bd-068566f7ff50}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d90dbd4-b845-466f-b5bd-068566f7ff50%7D"}, "html": {"href": "https://bitbucket.org/%7B3d90dbd4-b845-466f-b5bd-068566f7ff50%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/3bc6528f8fe1fef6b6ecc7312ee0cf04d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTF-2.png"}}, "nickname": "Tully Foote", "type": "user", "account_id": "557058:e2bf789f-2138-4a4e-ba39-3d618078e20b"}, "updated_on": null, "type": "issue_comment", "id": 34663646}], "page": 1, "size": 7}