{"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/issues/18/comments/34511657.json"}, "html": {"href": "#!/osrf/cloudsim-portal/issues/18#comment-34511657"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal/issues/18.json"}}, "type": "issue", "id": 18, "repository": {"links": {"self": {"href": "data/repositories/osrf/cloudsim-portal.json"}, "html": {"href": "#!/osrf/cloudsim-portal"}, "avatar": {"href": "data/bytebucket.org/ravatar/{ccc09dfa-4343-4a4f-8bdc-a83865647cef}ts=default"}}, "type": "repository", "name": "cloudsim-portal", "full_name": "osrf/cloudsim-portal", "uuid": "{ccc09dfa-4343-4a4f-8bdc-a83865647cef}"}, "title": "ssh keys sometimes are not valid"}, "content": {"raw": "tf4 doesn't have the issue\n```\n#!nodejs\nx[140].data.name\n'tftest4'\nx[140].data.bluepayloads[0].sshkey\n'sshkey-066'\n\n```\ncloudsim here means that the portal had no sshkey property set on the round data.\n\n```\n#!nodejs\nx[137].data.name\n'tftest'\nx[137].data.bluepayloads[0].sshkey\n'cloudsim'\n```\nUsing an old version of the page that predates the sshkey generation? it doesn't seem likely.\n\nThe sshkey data is normally set in a callback, where the e.detail.id is the sshkey-xxx id and propertyName would be the path to set in the round data: \"sacround.sshArbiter\".\n\n\n```\n#!js\n\n      _onSshKeyGenerated(propertyName, e) {\n        const keyResourceId = e.detail.id\n        // Share key with all admins\n        const data = { grantee: 'sasc-admins',\n                       resource: keyResourceId,\n                       readonly: false }\n        this.$.portalgrant.grant(data)\n```\nPerhaps that callback did not get invoked. That would explain the \"cloudsim\" default key that was used. Was the call to generate a key issued, or a key generated?", "markup": "markdown", "html": "<p>tf4 doesn't have the issue</p>\n<div class=\"codehilite language-nodejs\"><pre><span></span>x[140].data.name\n&#39;tftest4&#39;\nx[140].data.bluepayloads[0].sshkey\n&#39;sshkey-066&#39;\n</pre></div>\n\n\n<p>cloudsim here means that the portal had no sshkey property set on the round data.</p>\n<div class=\"codehilite language-nodejs\"><pre><span></span>x[137].data.name\n&#39;tftest&#39;\nx[137].data.bluepayloads[0].sshkey\n&#39;cloudsim&#39;\n</pre></div>\n\n\n<p>Using an old version of the page that predates the sshkey generation? it doesn't seem likely.</p>\n<p>The sshkey data is normally set in a callback, where the e.detail.id is the sshkey-xxx id and propertyName would be the path to set in the round data: \"sacround.sshArbiter\".</p>\n<div class=\"codehilite language-js\"><pre><span></span>      <span class=\"nx\">_onSshKeyGenerated</span><span class=\"p\">(</span><span class=\"nx\">propertyName</span><span class=\"p\">,</span> <span class=\"nx\">e</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n        <span class=\"kr\">const</span> <span class=\"nx\">keyResourceId</span> <span class=\"o\">=</span> <span class=\"nx\">e</span><span class=\"p\">.</span><span class=\"nx\">detail</span><span class=\"p\">.</span><span class=\"nx\">id</span>\n        <span class=\"c1\">// Share key with all admins</span>\n        <span class=\"kr\">const</span> <span class=\"nx\">data</span> <span class=\"o\">=</span> <span class=\"p\">{</span> <span class=\"nx\">grantee</span><span class=\"o\">:</span> <span class=\"s1\">&#39;sasc-admins&#39;</span><span class=\"p\">,</span>\n                       <span class=\"nx\">resource</span><span class=\"o\">:</span> <span class=\"nx\">keyResourceId</span><span class=\"p\">,</span>\n                       <span class=\"nx\">readonly</span><span class=\"o\">:</span> <span class=\"kc\">false</span> <span class=\"p\">}</span>\n        <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">$</span><span class=\"p\">.</span><span class=\"nx\">portalgrant</span><span class=\"p\">.</span><span class=\"nx\">grant</span><span class=\"p\">(</span><span class=\"nx\">data</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>Perhaps that callback did not get invoked. That would explain the \"cloudsim\" default key that was used. Was the call to generate a key issued, or a key generated?</p>", "type": "rendered"}, "created_on": "2017-02-19T03:36:16.222191+00:00", "user": {"display_name": "Hugo Boyer", "uuid": "{3d87874e-7099-4981-b04f-57f0272faa7d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D"}, "html": {"href": "https://bitbucket.org/%7B3d87874e-7099-4981-b04f-57f0272faa7d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/21198da8539b599e3633017f5f5f8150d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsHB-6.png"}}, "nickname": "hugomatic", "type": "user", "account_id": "557058:869c02bb-b246-4cdc-9db3-0064e8add185"}, "updated_on": null, "type": "issue_comment", "id": 34511657}